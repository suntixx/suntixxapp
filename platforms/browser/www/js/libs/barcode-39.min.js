/*!
 * Barcode39 v0.0.2 ~ Copyright (c) 2012 Erik Zettersten, http://zettersten.com
 * Released under MIT license
 */

(function(){"use strict";var e;var t="0.0.2";[].indexOf||(Array.prototype.indexOf=function(e,t,n){for(n=this.length,t=(n+~~t)%n;t<n&&(!(t in this)||this[t]!==e);t++);return t^n?t:-1});"".trim||(String.prototype.trim=function(){return this.replace(/^[\s\uFEFF]+|[\s\uFEFF]+$/g,"")});var n=[["0","NnNwWnWnN","bwbWBwBwb"],["1","WnNwNnNnW","BwbWbwbwB"],["2","NnWwNnNnW","bwBWbwbwB"],["3","WnWwNnNnN","BwBWbwbwb"],["4","NnNwWnNnW","bwbWBwbwB"],["5","WnNwWnNnN","BwbWBwbwb"],["6","NnWwWnNnN","bwBWBwbwb"],["7","NnNwNnWnW","bwbWbwBwB"],["8","WnNwNnWnN","BwbWbwBwb"],["9","NnWwNnWnN","bwBWbwBwb"],["A","WnNnNwNnW","BwbwbWbwB"],["B","NnWnNwNnW","bwBwbWbwB"],["C","WnWnNwNnN","BwBwbWbwb"],["D","NnNnWwNnW","bwbwBWbwB"],["E","WnNnWwNnN","BwbwBWbwb"],["F","NnWnWwNnN","bwBwBWbwb"],["G","NnNnNwWnW","bwbwbWBwB"],["H","WnNnNwWnN","BwbwbWBwb"],["I","NnWnNwWnN","bwBwbWBwb"],["J","NnNnWwWnN","bwbwBWBwb"],["K","WnNnNnNwW","BwbwbwbWB"],["L","NnWnNnNwW","bwBwbwbWB"],["M","WnWnNnNwN","BwBwbwbWb"],["N","NnNnWnNwW","bwbwBwbWB"],["O","WnNnWnNwN","BwbwBwbWb"],["P","NnWnWnNwN","bwBwBwbWb"],["Q","NnNnNnWwW","bwbwbwBWB"],["R","WnNnNnWwN","BwbwbwBWb"],["S","NnWnNnWwN","bwBwbwBWb"],["T","NnNnWnWwN","bwbwBwBWb"],["U","WwNnNnNnW","BWbwbwbwB"],["V","NwWnNnNnW","bWBwbwbwB"],["W","WwWnNnNnN","BWBwbwbwb"],["X","NwNnWnNnW","bWbwBwbwB"],["Y","WwNnWnNnN","BWbwBwbwb"],["Z","NwWnWnNnN","bWBwBwbwb"],["-","NwNnNnWnW","bWbwbwBwB"],[".","WwNnNnWnN","BWbwbwBwb"],[" ","NwWnNnWnN","bWBwbwBwb"],["$","NwNwNwNnN","bWbWbWbwb"],["/","NwNwNnNwN","bWbWbwbWb"],["+","NwNnNwNwN","bWbwbWbWb"],["%","NnNwNwNwN","bwbWbWbWb"],["*","NwNnWnWnN","bWbwBwBwb"]];var r=function(e,t){e=(""+e).toUpperCase();t=t?+t:2;for(var r=0;r<n.length;r++)if(e===n[r][0])return n[r][t]};var i=[];var s=function(e){i.push("["+e+"]w")};e=function(e,r,i){this.codes=n;this.version=t;this.barcode=null;this.element=document.getElementById(e||"barcode");this.delimeter=i||"*";this.type=r||2;this.init()};e.prototype.toString=function(){if(!this.barcode)return"";return(this.delimeter+this.barcode+this.delimeter).trim()};e.prototype.toBarcode=function(){var e=i.join("");e=e.slice(0,e.length-1);return e.trim()};e.prototype.toDataURL=function(){if(typeof this.element==="undefined")throw new Error("Element not defined.");var e=document.createElement("canvas");if(!e.getContext)throw new Error("Canvas not supported.");var t=this.element.innerText.toUpperCase().trim(),n=+t.length,i=n*15+(n-1),o=i<360?400:i+40,u=120,a=e.getContext("2d");a.clearRect(0,0,e.width,e.height);e.height=u;e.width=o;a.fillStyle="rgba(255,255,255, 0.0)";a.fillRect(0,0,e.width,e.height);var f,l,c=Math.round(o/2-i/2),h=20,p=3,d=80;for(f=0;f<t.length;f++){var v=r(t[f]);s(v);if(typeof v===""||typeof v==="undefined")v=r("-");for(l=0;l<v.length;l++){if(l%2==0)a.fillStyle="rgb(0,0,0)";else a.fillStyle="rgba(255,255,255, 0.0)";if(v.charCodeAt(l)<91){a.fillRect(c,h,p,d);c+=3}else{a.fillRect(c,h,1,d);c+=1}}if(f!=t.length-1){a.fillStyle="rgba(255,255,255, 0.0)";a.fillRect(c,h,1,d);c+=1}}this.barcode=t;return e.toDataURL()};e.prototype.init=function(){i=[];var e=this.toDataURL();this.element.innerHTML='<img src="'+e+'" />'};window.Barcode39=e})()